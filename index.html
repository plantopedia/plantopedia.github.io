<!DOCTYPE html>
<html lang="br">
<head>
  <meta charset="UTF-8">
  <title>Plantopedia</title>
  <head>
  <script src="https://cdn.jsdelivr.net/gh/plantopedia/API@main/planta-db.js"></script>

  <style>
/* Importando fonte estilosa do Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Nunito', sans-serif;
}

body {
    background: url('http://upload.wikimedia.org/wikipedia/commons/f/f6/Epping_Forest_Centenary_Walk_2_-_Sept_2008.jpg') no-repeat center center fixed;
    background-size: 100% 100%;
    color: #fff;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background-color: red;
}

/* HEADER */
header {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    padding: 15px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    width: 100%;
    top: 0;
    left: 0;
    z-index: 1000;
}

.header-container {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    position: relative; 
}

.header-container h1 {
    font-size: 24px;
    font-weight: bold;
    color: #50c878; /* Verde vibrante */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); 
    bottom: -8px;
    position: relative; 
    z-index: 2; 
}

.header-container hr {
    width: 100%;
    border: none;
    border-top: 2px solid rgba(255, 255, 255, 0.4);
    position: absolute;
    top: 30%;
    left: 0;
    z-index: 1;
}

.header-container p {
    font-size: 12px;
    font-style: italic;
    color: rgba(255, 255, 255, 0.7); 
    padding-bottom: 61px;
}

.search-container {
    display: flex;
    align-items: center;
}

#searchBar {
    padding: 8px;
    border: none;
    border-radius: 5px;
    outline: none;
    width: 250px;
}

#searchButton {
    background: #50c878;
    color: white;
    border: none;
    padding: 8px 15px;
    margin-left: 10px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

#searchButton:hover {
    background: #3fa567;
}

/* CONTAINER DE RESULTADOS */
main {
    margin-top: 150px;
    margin-bottom: 130px;
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.result-container {
    background: rgba(0, 0, 0, 0.4);
    padding: 20px;
    border-radius: 10px;
    width: 95%;
    max-width: 600px;
    text-align: left;
    backdrop-filter: blur(10px);
    display:none;
}

.result-container img {
    width: 200px;
    border-radius: 10px;
    margin-top: 10px;
}

/* FOOTER */
footer {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    padding: 15px 20px;
    font-size: 14px;
    bottom: 0%;
    width: 100%;
    display: flex; /* Usa flexbox */
    justify-content: space-between; /* Itens nas extremidades */
    align-items: center; /* Alinha verticalmente */
    position: fixed;
}

/* Ajusta a estrutura da exibi√ß√£o */
.plant-details {
    display: flex;
    align-items: center;
    gap: 20px;
}

/* Estiliza a imagem */

.plant-image {
text-align: center;
}

.plant-image img {
    width: 200px;
    height: auto;
    border-radius: 10px;
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
}

/* Estiliza a √°rea de informa√ß√µes */
.plant-info {
    background: rgba(0, 0, 0, 0.4);
    padding: 10px;
    border-radius: 10px;
    backdrop-filter: blur(10px);
    flex-grow: 1;
}

/* Estiliza a tabela de dados */

.plant-info table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(0, 0, 0, 0.4); /* Fundo transl√∫cido */
    backdrop-filter: blur(10px);
    overflow: hidden;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
}

.plant-info th, .plant-info td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    transition: background 0.3s;
}

.plant-info th {
    background: rgba(80, 200, 120, 0.3);
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
}

.plant-info td:first-child {
    font-weight: bold;
    color: #50c878;
}

.plant-info tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.1);
}

.plant-info tr:hover {
    background: rgba(80, 200, 120, 0.3);
    transform: scale(1.02);
}

#plant-about {
    background: rgba(0, 0, 0, 0.4); /* Fundo transl√∫cido */
    backdrop-filter: blur(10px);
    padding: 15px;
    color: #fff;
    font-size: 16px;
    line-height: 1.6;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
    margin-top: 10px;
}

#mDetails {
text-align: center;
}

#mDetails, #sDetails {
padding: 5px;
border: 4px solid black;
}

#feed {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
}

.feed-item {
    display: flex;
    align-items: center;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: 0.3s;
    width: 95%;
}

.feed-item:hover {
    background: #f0f0f0;
}

.feed-content {
    flex: 1;
}

.feed-image img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 5px;
}

#backButton {
    position: absolute;
    top: 10px;
    left: 10px;
    padding: 8px 15px;
    background: #50c878;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
}

#backButton:hover {
    background: #3da65d;
}

.result-container {
    position: relative; /* Para o bot√£o ficar posicionado dentro desse container */
    padding-top: 50px;  /* Para n√£o sobrepor o conte√∫do */
}
  </style>
</head>
</head>
<body>

    <header>
           <div class="header-container">
        <h1>Plantopedia</h1>
        <hr>
        <p>Zass natureza kalbuz'de</p>
    </div>
        <div class="search-container">
            <input id="searchBar" type="text" placeholder="Busque parametros...">
            <button id="searchButton">Pesquisar</button>
        </div>
    </header>
  <main>
        <div id="feed"></div>
        <div class="result-container">
          <button id="backButton">Voltar</button>
            <br>          
            <div id="mDetails">
            <h2 id="plant-name"></h2>
            <div id="plant-details">
            <div id="plant-image"></div><br>
            <div class="plant-info">
             <table>
             <tbody id="plant-data-table"></tbody>
             </table>
             </div></div></div><br>
             
            <div id="sDetails">
            <h3 style="color:lime">About:</h3>
            <p id="plant-about"></p>
            </div>
            
        </div>
    </main>

<footer>
    <a href="https://seulink.com" style="display: inline-block; padding: 10px 20px; background: rgba(80, 200, 120, 0.3);
backdrop-filter: blur(10px); color: white; font-size: 14px; font-weight: bold; text-decoration: none; border-radius: 5px; box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); transition: 0.3s;" 
       onmouseover="this.style.backgroundColor='#3da65d'; this.style.boxShadow='3px 3px 7px rgba(0, 0, 0, 0.5)';" 
       onmouseout="this.style.backgroundColor='#50c878'; this.style.boxShadow='2px 2px 5px rgba(0, 0, 0, 0.3)';">
        Documenta√ß√£o
    </a>

    <div style="text-align: right;">
        <p>&copy; Plantopedia - Criado por Kirey Cazkdnsky</p>
        <h4>üåø Feito com Amor e Dedica√ß√£o</h4>
    </div>
</footer>
    

  <script>
  function ensurePlantIndexLoaded(callback) {
      // Aguarda at√© que `window.plantIndex` esteja definido antes de executar `callback`
      if (typeof window.plantIndex === "undefined") {
          setTimeout(() => ensurePlantIndexLoaded(callback), 5); // Tenta novamente em 5ms
      } else {
          callback();
      }
  }

function searchPlant() {
    const query = document.getElementById("searchBar").value.trim();
    const feed = document.getElementById("feed");
    const resultContainer = document.querySelector(".result-container");

    feed.innerHTML = "";
    resultContainer.style.display = "none";

    if (!query) {
        feed.innerHTML = "<p>Digite algo para buscar.</p>";
        return;
    }

    const results = buscarPlantas(query);

    if (results[0].nome === "Nenhuma planta encontrada.") {
        feed.innerHTML = "<p>Nenhuma planta encontrada.</p>";
        return;
    }

    results.forEach(result => {
        result.arquivos.forEach(file => {
            const card = document.createElement("div");
            card.classList.add("feed-item");
            card.innerHTML = `
                <div class="feed-content">
                    <h3>${result.nome}</h3>
                    <p>Carregando descri√ß√£o...</p>
                </div>
                <div class="feed-image">
                    <img src="loading.png" alt="Carregando">
                </div>
            `;

            fetch(file)
                .then(response => response.text())
                .then(scriptContent => {
                    const script = document.createElement("script");
                    script.innerHTML = scriptContent;
                    document.body.appendChild(script);

                    setTimeout(() => {
                        if (typeof plantData !== "undefined") {
                            card.querySelector("p").innerText = plantData.about.substring(0, 500) + "...";
                            card.querySelector("img").src = plantData.image;
                            card.querySelector("img").alt = plantData.name;

                            card.addEventListener("click", () => {
                                openPlantDetails(plantData);
                            });
                        }
                    }, 100);
                });

            feed.appendChild(card);
        });
    });
}

function openPlantDetails(plantData) {
    const feed = document.getElementById("feed");
    const resultContainer = document.querySelector(".result-container");

    document.getElementById("plant-name").innerText = plantData.name;
    document.getElementById("plant-image").innerHTML = `<img src="${plantData.image}" width="200">`;
    document.getElementById("plant-about").innerText = plantData.about || "Nenhuma descri√ß√£o dispon√≠vel.";

    // Monta a tabela
    const tableBody = document.getElementById("plant-data-table");
    tableBody.innerHTML = `
        <tr><td>Sch√∂mner:</td><td>${plantData.schominicalName || "N/A"}</td></tr>
        <tr><td>Ci√™ncia:</td><td>${plantData.scientificName || "N/A"}</td></tr>
        <tr><td>Tempo de Vida:</td><td>${plantData.lifespan || "N/A"}</td></tr>
        <tr><td>Exig√™ncia de Luz:</td><td>${plantData.lightRequirement || "N/A"}</td></tr>
        <tr><td>Exig√™ncia de √Ågua:</td><td>${plantData.waterRequirement || "N/A"}</td></tr>
        <tr><td>Tipo:</td><td>${plantData.type || "N/A"}</td></tr>
        <tr><td>Benef√≠cios Ecol√≥gicos:</td><td>${plantData.ecologicalBenefits || "None"}</td></tr>
        <tr><td>Suscetibilidade a Pragas/Doen√ßas:</td><td>${plantData.pestSusceptibility || "None"}</td></tr>
        <tr><td>Propriedades Medicinais:</td><td>${plantData.medicinalProperties || "None"}</td></tr>
        <tr><td>Fruto:</td><td>${plantData.hasFruit ? "Sim" : "N√£o"}</td></tr>
        <tr><td>Tipo de Fruto:</td><td>${plantData.fruitType || "N/A"}</td></tr>
        <tr><td>Tipo de Folha:</td><td>${plantData.leafType || "N/A"}</td></tr>
        <tr><td>Profundidade da Raiz:</td><td>${plantData.rootDepth || "N/A"}</td></tr>
        <tr><td>Altura M√°xima:</td><td>${plantData.maxHeight || "N/A"}</td></tr>
        <tr><td>Taxa de Crescimento:</td><td>${plantData.growthRate || "N/A"}</td></tr>
        <tr><td>Solo Preferido:</td><td>${plantData.preferredSoil || "N/A"}</td></tr>
        <tr><td>Nativo:</td><td>${plantData.nativeRegion || "N/A"}</td></tr>
        <tr><td>Nomes Populares:</td><td>${plantData.popularNames ? plantData.popularNames.join(", ") : "N/A"}</td></tr>
    `;

    // Oculta o feed e exibe os detalhes
    feed.style.display = "none";
    resultContainer.style.display = "block";
}

document.getElementById("backButton").addEventListener("click", () => {
    document.getElementById("feed").style.display = "block";
    document.querySelector(".result-container").style.display = "none";
});

// Eventos para pesquisa
document.getElementById("searchButton").addEventListener("click", searchPlant);
document.getElementById("searchBar").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        searchPlant();
    }
});
  </script>

</body>
</html>
